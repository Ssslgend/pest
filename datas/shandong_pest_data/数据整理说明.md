# 山东省美国白蛾数据整理说明

## 📁 当前目录结构

### ✅ 训练相关文件（当前目录）
- **源文件**:
  - `发病情况.xlsx` - 真实发病程度数据源 ⭐
  - `shandong.json` - 县边界GeoJSON数据源 ⭐
  - `shandong_spatial_meteorological_data.csv` - 提取的气象数据（87MB）⭐

- **最终训练数据集** ⭐ **推荐使用**:
  - `real_occurrence_train.csv` - 训练集 (2.6MB, 4,041样本)
  - `real_occurrence_val.csv` - 验证集 (861KB, 1,347样本)
  - `real_occurrence_test.csv` - 测试集 (861KB, 1,347样本)
  - `real_occurrence_complete_data.csv` - 完整数据 (4.0MB, 6,735样本)
  - `real_occurrence_scaler.joblib` - 特征标准化器 (2KB)
  - `real_occurrence_statistics.json` - 统计信息 (4KB)

- **文档**:
  - `数据文件整理说明.md` - 详细文档
  - `数据整理说明.md` - 当前简洁说明

### 🗂️ 归档文件（`archive_non_training_data/` 目录）
所有早期生成的、中间处理的、不再推荐使用的数据文件都已移动到归档目录：

#### 早期数据集（不推荐使用）
- `american_moth_*` - 早期处理的数据集
- `final_merged_*` - 中间合并数据集
- `real_meteo_*` - 早期气象数据集
- `spatial_*` - 空间处理数据集
- `shandong_american_moth_*` - 原始处理数据集
- `shandong_real_meteo_*` - 真实气象整合数据集
- `shandong_fall_webworm_occurrences_*` - 早期发病数据

#### 其他归档文件
- `shandong_american_moth_occurrences.xlsx` - 另一份发病数据源
- `shandong_affected_counties_*.txt` - 受影响县区列表

## 🎯 使用指南

### 直接用于模型训练
```python
# 加载训练数据
import pandas as pd
import joblib

# 读取数据集
train_data = pd.read_csv('real_occurrence_train.csv')
val_data = pd.read_csv('real_occurrence_val.csv')
test_data = pd.read_csv('real_occurrence_test.csv')

# 加载标准化器
scaler = joblib.load('real_occurrence_scaler.joblib')

# 特征列（31个气象特征）
feature_columns = [
    'Temperature_mean', 'Temperature_std', 'Temperature_min', 'Temperature_max',
    'Humidity_mean', 'Humidity_std', 'Humidity_min', 'Humidity_max',
    'Rainfall_mean', 'Rainfall_sum', 'Rainfall_min', 'Rainfall_max',
    'WS_mean', 'WS_std', 'WD_mean',
    'Pressure_mean', 'Pressure_std',
    'Sunshine_mean', 'Sunshine_std',
    'Visibility_mean', 'Visibility_std',
    'latitude', 'longitude', 'Season', 'Temp_Humidity_Index',
    'Cumulative_Rainfall_3month', 'Temp_Trend',
    'Temperature_lag1', 'Humidity_lag1', 'Rainfall_lag1',
    'Moth_Activity_Level'
]

# 标签列
label_columns = ['Severity', 'Has_Occurrence']  # Severity:1-3, Has_Occurrence:0-1
```

### 数据特点
- **时间范围**: 2019-2023年
- **空间覆盖**: 112个县区
- **发病程度**: 1=低度发生(87.5%), 2=中度发生(11.4%), 3=高度发生(1.2%)
- **所有县都有发生**: 程度1不是"无发生"而是最低发生程度

## ⚠️ 重要说明

1. **发病程度含义**: 所有县都有美国白蛾发生，程度1-3表示严重程度
2. **推荐数据**: 只使用 `real_occurrence_*` 系列文件进行训练
3. **归档文件**: `archive_non_training_data/` 中的文件为早期处理结果，不再推荐使用
4. **源文件保留**: 核心源文件仍在主目录，便于需要时重新处理

## 📊 快速统计

- **训练样本**: 4,041条 (2019-2021年)
- **验证样本**: 1,347条 (2022年)
- **测试样本**: 1,347条 (2023年)
- **总样本**: 6,735条
- **特征维度**: 31个
- **县区数量**: 112个

整理完成！现在目录简洁清晰，训练相关文件一目了然。